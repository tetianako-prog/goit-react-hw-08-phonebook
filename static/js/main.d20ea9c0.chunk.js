(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{103:function(t,e,r){"use strict";r.r(e);var c=r(0),n=r.n(c),a=r(22),o=r.n(a),u=(r(73),r(60)),s=r(61),i=r(66),b=r(65),j=r(12),l=r(8),O=r(17),d=r(38),f=r(18),g=r(2);var h,p,x,C,v,m,S=Object(j.b)((function(t){return{isAuthenticated:f.a.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(g.jsxs)(d.a,{children:[Object(g.jsx)(O.c,{to:"/",exact:!0,className:"nav-link",children:"Home"}),e&&Object(g.jsx)(O.c,{to:"/contacts",exact:!0,className:"nav-link",children:"Contacts"})]})})),k=function(){return Object(g.jsxs)(d.a,{children:[Object(g.jsx)(O.c,{to:"/register",exact:!0,className:"nav-link",children:"Register"}),Object(g.jsx)(O.c,{to:"/login",exact:!0,className:"nav-link",children:"Login"})]})},E=r(31),y=r(46),R={onLogout:E.a.logOut},q=Object(j.b)((function(t){return{email:f.a.getUserEmail(t)}}),R)((function(t){var e=t.email,r=t.onLogout;return Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{style:{color:"rgb(255,255,255)",marginRight:"10px"},children:e}),Object(g.jsx)(y.a,{type:"button",variant:"light",onClick:r,children:"Logout"})]})})),U=r(47),w=r(64),A=Object(j.b)((function(t){return{isAuthenticated:f.a.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(g.jsx)(w.a,{bg:"primary",variant:"dark",children:Object(g.jsxs)(U.a,{fluid:"xl",children:[Object(g.jsx)(S,{}),e?Object(g.jsx)(q,{}):Object(g.jsx)(k,{})]})})})),I=r(26),z=r(39),L=["component","redirectTo"],T=function(t){var e=t.component,r=t.redirectTo,c=Object(z.a)(t,L),n=Object(j.d)(f.a.getIsAuthenticated);return Object(g.jsx)(l.b,Object(I.a)(Object(I.a)({},c),{},{render:function(t){return n?Object(g.jsx)(e,Object(I.a)({},t)):Object(g.jsx)(l.a,{to:r})}}))},N=["component","redirectTo"],B=function(t){var e=t.component,r=t.redirectTo,c=Object(z.a)(t,N),n=Object(j.d)(f.a.getIsAuthenticated);return Object(g.jsx)(l.b,Object(I.a)(Object(I.a)({},c),{},{render:function(t){return n&&c.restricted?Object(g.jsx)(l.a,{to:r}):Object(g.jsx)(e,Object(I.a)({},t))}}))},G=Object(c.lazy)((function(){return r.e(7).then(r.bind(null,116))})),J=Object(c.lazy)((function(){return Promise.all([r.e(3),r.e(6)]).then(r.bind(null,119))})),M=Object(c.lazy)((function(){return r.e(5).then(r.bind(null,117))})),P=Object(c.lazy)((function(){return r.e(4).then(r.bind(null,118))})),D=function(t){Object(i.a)(r,t);var e=Object(b.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(A,{}),Object(g.jsx)(c.Suspense,{fallback:Object(g.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(g.jsxs)(l.d,{children:[Object(g.jsx)(B,{exact:!0,path:"/",component:G}),Object(g.jsx)(T,{path:"/contacts",redirectTo:"/login",component:J}),Object(g.jsx)(B,{path:"/login",restricted:!0,redirectTo:"/contacts",component:P}),Object(g.jsx)(B,{path:"/register",restricted:!0,redirectTo:"/contacts",component:M}),Object(g.jsx)(l.b,{render:function(){return Object(g.jsx)("div",{style:{textAlign:"center"},children:"Page not found :("})}})]})})]})}}]),r}(c.Component),H={onGetCurretnUser:E.a.getCurrentUser},F=Object(j.b)(null,H)(D),K=r(62),Q=r(37),V=r(4),W=r(21),X=r(5),Y=r(10),Z=r(13),$=Object(V.c)([],(h={},Object(X.a)(h,Z.a.fetchContactSuccess,(function(t,e){return e.payload})),Object(X.a)(h,Z.a.addContactSuccess,(function(t,e){var r=e.payload;return[].concat(Object(Q.a)(t),[r])})),Object(X.a)(h,Z.a.deleteContactSuccess,(function(t,e){var r=e.payload;return t.filter((function(t){return t.id!==r}))})),h)),_=Object(V.c)(!1,(p={},Object(X.a)(p,Z.a.fetchContactRequest,(function(){return!0})),Object(X.a)(p,Z.a.fetchContactSuccess,(function(){return!1})),Object(X.a)(p,Z.a.fetchContactError,(function(){return!1})),Object(X.a)(p,Z.a.addContactRequest,(function(){return!0})),Object(X.a)(p,Z.a.addContactSuccess,(function(){return!1})),Object(X.a)(p,Z.a.addContactError,(function(){return!1})),Object(X.a)(p,Z.a.deleteContactRequest,(function(){return!0})),Object(X.a)(p,Z.a.deleteContactSuccess,(function(){return!1})),Object(X.a)(p,Z.a.deleteContactError,(function(){return!1})),p)),tt=Object(V.c)("",Object(X.a)({},Z.a.filterContacts,(function(t,e){return e.payload}))),et=Object(V.c)(null,{}),rt=Object(Y.b)({items:$,filter:tt,loading:_,error:et}),ct=r(6),nt={name:null,email:null},at=Object(V.c)(nt,(x={},Object(X.a)(x,ct.a.registerSuccess,(function(t,e){return e.payload.user})),Object(X.a)(x,ct.a.loginSuccess,(function(t,e){return e.payload.user})),Object(X.a)(x,ct.a.logoutSuccess,(function(){return nt})),Object(X.a)(x,ct.a.getCurrentUserSuccess,(function(t,e){return e.payload})),x)),ot=Object(V.c)(null,(C={},Object(X.a)(C,ct.a.registerSuccess,(function(t,e){return e.payload.token})),Object(X.a)(C,ct.a.loginSuccess,(function(t,e){return e.payload.token})),Object(X.a)(C,ct.a.logoutSuccess,(function(){return null})),C)),ut=function(t,e){return e.payload},st=Object(V.c)(null,(v={},Object(X.a)(v,ct.a.registerError,ut),Object(X.a)(v,ct.a.loginError,ut),Object(X.a)(v,ct.a.logoutError,ut),Object(X.a)(v,ct.a.getCurrentUserError,ut),v)),it=Object(V.c)(!1,(m={},Object(X.a)(m,ct.a.registerSuccess,(function(){return!0})),Object(X.a)(m,ct.a.loginSuccess,(function(){return!0})),Object(X.a)(m,ct.a.getCurrentUserSuccess,(function(){return!0})),Object(X.a)(m,ct.a.registerError,(function(){return!1})),Object(X.a)(m,ct.a.loginError,(function(){return!1})),Object(X.a)(m,ct.a.getCurrentUserError,(function(){return!1})),Object(X.a)(m,ct.a.logoutSuccess,(function(){return!1})),m)),bt=Object(Y.b)({user:at,token:ot,error:st,isLoggedIn:it}),jt=r(63),lt=r.n(jt),Ot=Object(Q.a)(Object(V.d)({serializableCheck:{ignoredActions:[W.a,W.f,W.b,W.c,W.d,W.e]}})),dt={key:"auth",storage:lt.a,whitelist:["token"]},ft=Object(V.a)({reducer:{auth:Object(W.g)(dt,bt),contacts:rt},middleware:Ot}),gt={store:ft,persistor:Object(W.h)(ft)};r(102);o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(j.a,{store:gt.store,children:Object(g.jsx)(K.a,{loading:null,persistor:gt.persistor,children:Object(g.jsx)(O.a,{children:Object(g.jsx)(F,{})})})})}),document.getElementById("root"))},13:function(t,e,r){"use strict";var c=r(4),n={fetchContactRequest:Object(c.b)("contacts/fetchContactRequest"),fetchContactSuccess:Object(c.b)("contacts/fetchContactSuccess"),fetchContactError:Object(c.b)("contacts/fetchContactError"),addContactRequest:Object(c.b)("contacts/addContactRequest"),addContactSuccess:Object(c.b)("contacts/addContactSuccess"),addContactError:Object(c.b)("contacts/addContactError"),deleteContactRequest:Object(c.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(c.b)("contacts/deleteContactSuccess"),deleteContactError:Object(c.b)("contacts/deleteError"),filterContacts:Object(c.b)("contacts/filter")};e.a=n},18:function(t,e,r){"use strict";var c={getIsAuthenticated:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getUserEmail:function(t){return t.auth.user.email}};e.a=c},31:function(t,e,r){"use strict";var c=r(20),n=r.n(c),a=r(30),o=r(25),u=r.n(o),s=r(6);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){u.a.defaults.headers.common.Authorization=""},j={register:function(t){return function(){var e=Object(a.a)(n.a.mark((function e(r){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(s.a.registerRequest()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:c=e.sent,i(c.data.token),r(s.a.registerSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(s.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(n.a.mark((function e(r){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(s.a.loginRequest()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:c=e.sent,i(c.data.token),console.log(c),r(s.a.loginSuccess(c.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r(s.a.loginError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(s.a.logoutRequest()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:b(),e(s.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(s.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(n.a.mark((function t(e,r){var c,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),a=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(a),e(s.a.getCurrentUserRequest()),t.prev=5,t.next=8,u.a.get("/users/current");case 8:o=t.sent,e(s.a.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(s.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,r){return t.apply(this,arguments)}}()}};e.a=j},6:function(t,e,r){"use strict";var c=r(4),n={registerRequest:Object(c.b)("auth/registerRequest"),registerSuccess:Object(c.b)("auth/registerSuccess"),registerError:Object(c.b)("auth/registerError"),loginRequest:Object(c.b)("auth/loginRequest"),loginSuccess:Object(c.b)("auth/loginSuccess"),loginError:Object(c.b)("auth/loginError"),logoutRequest:Object(c.b)("auth/logoutRequest"),logoutSuccess:Object(c.b)("auth/logoutSuccess"),logoutError:Object(c.b)("auth/logoutError"),getCurrentUserRequest:Object(c.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(c.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(c.b)("auth/getCurrentUserError")};e.a=n}},[[103,1,2]]]);
//# sourceMappingURL=main.d20ea9c0.chunk.js.map